<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Police Dashboard - Swayam Suraksha</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
      color: #333;
      background-color: #f8f9fa;
    }
    
    /* Navbar styles */
    .navbar {
      background-color: #ffffff;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .navbar-nav .nav-link {
      margin-right: 20px;
      color: #333;
      font-weight: 500;
      transition: color 0.3s, transform 0.3s;
    }
    
    .navbar-nav .nav-link:hover {
      color: #4CAF50;
      transform: translateY(-2px);
    }
    
    .brand-logo {
      height: 50px;
      width: auto;
      margin-right: 10px;
    }
    
    /* Sidebar styles */
    .sidebar {
      width: 320px;
      background-color: #263238;
      color: white;
      padding: 20px;
      height: 100vh;
      position: fixed;
      top: 70px;
      right: -340px;
      transition: all 0.3s;
      z-index: 1000;
      overflow-y: auto;
    }
    
    .sidebar h4 {
      margin-bottom: 20px;
      border-bottom: 2px solid #4CAF50;
      padding-bottom: 10px;
    }
    
    .sidebar.active {
      right: 0;
    }
    
    .sidebar-toggle {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
      box-shadow: 0 2px 5px rgba(0,0,0,0.3);
      transition: background-color 0.3s;
    }
    
    .sidebar-toggle:hover {
      background-color: #388e3c;
    }
    
    /* Task card styles */
    .task-card {
      background-color: #37474f;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 15px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      transition: transform 0.2s;
    }
    
    .task-card:hover {
      transform: translateY(-3px);
    }
    
    .task-title {
      font-weight: 600;
      margin-bottom: 8px;
      color: #fff;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .task-description {
      font-size: 14px;
      color: #ccc;
      margin-bottom: 12px;
    }
    
    .task-details {
      display: none;
      background-color: #455a64;
      padding: 10px;
      border-radius: 6px;
      margin-top: 10px;
    }
    
    .task-status {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }
    
    .status-badge {
      font-size: 12px;
      padding: 4px 8px;
      border-radius: 12px;
      font-weight: 500;
    }
    
    .status-pending {
      background-color: #FFC107;
      color: #000;
    }
    
    .status-progress {
      background-color: #2196F3;
      color: #fff;
    }
    
    .status-done {
      background-color: #4CAF50;
      color: #fff;
    }
    
    .status-forwarded {
      background-color: #9C27B0;
      color: #fff;
    }
    
    .task-priority {
      font-size: 12px;
      margin-bottom: 8px;
      color: #fff;
    }
    
    .priority-high {
      color: #F44336;
    }
    
    .priority-medium {
      color: #FF9800;
    }
    
    .priority-low {
      color: #8BC34A;
    }
    
    .task-deadline {
      font-size: 12px;
      color: #ddd;
      margin-bottom: 8px;
    }
    
    .task-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 12px;
    }
    
    .task-btn {
      padding: 5px 10px;
      border: none;
      border-radius: 4px;
      font-size: 12px;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    
    .task-btn-done {
      background-color: #4CAF50;
      color: white;
    }
    
    .task-btn-progress {
      background-color: #2196F3;
      color: white;
    }
    
    .task-btn-forward {
      background-color: #9C27B0;
      color: white;
    }
    
    .task-btn:hover {
      opacity: 0.9;
    }
    
    .task-notes {
      margin-top: 10px;
    }
    
    .task-notes textarea {
      width: 100%;
      background-color: #546e7a;
      border: 1px solid #78909c;
      color: #fff;
      border-radius: 4px;
      padding: 8px;
      font-size: 13px;
      resize: vertical;
    }
    
    .task-notes textarea::placeholder {
      color: #cfd8dc;
    }
    
    .task-notes button {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      margin-top: 5px;
      cursor: pointer;
      font-size: 12px;
      float: right;
    }
    
    .task-toggle {
      background: none;
      border: none;
      color: #4CAF50;
      cursor: pointer;
      font-size: 20px;
    }
    
    /* Main content styles */
    .main-content {
      margin-top: 100px;
      padding: 20px;
    }
    
    .report-card {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 30px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      transition: transform 0.3s;
    }
    
    .report-card:hover {
      transform: translateY(-5px);
    }
    
    .location-link {
      color: #007BFF;
      cursor: pointer;
      text-decoration: underline;
    }
    
    .status-select, .update-textarea, .update-button {
      margin-top: 10px;
    }
    
    .update-textarea {
      width: 100%;
      resize: vertical;
    }
    
    /* Footer styles */
    footer {
      background-color: #212529;
      color: #ddd;
      padding: 25px 0 15px;
    }
    
    footer a {
      color: #4CAF50;
      text-decoration: none;
    }
    
    footer a:hover {
      text-decoration: underline;
      color: #2e7d32;
    }
    
    .footer-logo {
      height: 50px;
      margin-right: 10px;
    }
    
    .footer-brand {
      font-weight: bold;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
    }
    
    .separator {
      border: 0;
      height: 3px;
      background: #333;
      margin-top: 60px;
      margin-bottom: 40px;
    }
    
    /* Modal styles */
    .modal-content {
      border-radius: 10px;
    }
    
    .modal-header {
      background-color: #4CAF50;
      color: white;
      border-radius: 10px 10px 0 0;
    }
    
    .modal-body {
      padding: 20px;
    }
    
    .forward-options label {
      display: block;
      margin-bottom: 10px;
    }
  </style>
</head>

<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg fixed-top shadow-sm">
  <div class="container">
    <a class="navbar-brand d-flex align-items-center" href="index.html">
      <img src="main-logo.png" alt="Logo" class="brand-logo" width="50" height="50">
      <div class="brand-text">
        <strong>Swayam</strong><br>Suraksha
      </div>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item"><a class="nav-link active" href="index.html">Home</a></li>
        <li class="nav-item"><a class="nav-link" href="map.html">Crime Map</a></li>
        <li class="nav-item"><a class="nav-link" href="about.html">About Us</a></li>
        <li class="nav-item">
          <button class="sidebar-toggle ms-2" onclick="toggleSidebar()">
            <i class="fas fa-tasks me-2"></i> Assigned Tasks
            <span class="badge bg-danger ms-1">3</span>
          </button>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
  <h4><i class="fas fa-clipboard-list me-2"></i>Assigned Tasks</h4>
  
  <!-- Task 1 -->
  <div class="task-card">
    <div class="task-title">
      <span>Patrol Zone A</span>
      <button class="task-toggle" onclick="toggleTaskDetails(1)">
        <i class="fas fa-chevron-down" id="toggle-icon-1"></i>
      </button>
    </div>
    <div class="task-description">Daily patrol of residential area in Zone A</div>
    <div class="task-status">
      <span class="status-badge status-progress">In Progress</span>
      <span><i class="far fa-clock me-1"></i>Today</span>
    </div>
    
    <div class="task-details" id="task-details-1">
      <div class="task-priority priority-high"><i class="fas fa-exclamation-circle me-1"></i>High Priority</div>
      <div class="task-deadline"><i class="far fa-calendar-alt me-1"></i>Due: Today, 6:00 PM</div>
      <div class="task-buttons">
        <button class="task-btn task-btn-done" onclick="updateTaskStatus(1, 'done')">Mark Done</button>
        <button class="task-btn task-btn-progress" onclick="updateTaskStatus(1, 'progress')">In Progress</button>
        <button class="task-btn task-btn-forward" onclick="showForwardModal(1)">Forward</button>
      </div>
      <div class="task-notes">
        <textarea placeholder="Add notes about this task..." rows="2"></textarea>
        <button onclick="saveTaskNotes(1)">Save Notes</button>
      </div>
    </div>
  </div>
  
  <!-- Task 2 -->
  <div class="task-card">
    <div class="task-title">
      <span>Visit Complaint #124</span>
      <button class="task-toggle" onclick="toggleTaskDetails(2)">
        <i class="fas fa-chevron-down" id="toggle-icon-2"></i>
      </button>
    </div>
    <div class="task-description">Follow up on theft complaint at MG Road</div>
    <div class="task-status">
      <span class="status-badge status-pending">Pending</span>
      <span><i class="far fa-clock me-1"></i>2 days ago</span>
    </div>
    
    <div class="task-details" id="task-details-2">
      <div class="task-priority priority-medium"><i class="fas fa-exclamation-circle me-1"></i>Medium Priority</div>
      <div class="task-deadline"><i class="far fa-calendar-alt me-1"></i>Due: Tomorrow, 12:00 PM</div>
      <div class="task-buttons">
        <button class="task-btn task-btn-done" onclick="updateTaskStatus(2, 'done')">Mark Done</button>
        <button class="task-btn task-btn-progress" onclick="updateTaskStatus(2, 'progress')">In Progress</button>
        <button class="task-btn task-btn-forward" onclick="showForwardModal(2)">Forward</button>
      </div>
      <div class="task-notes">
        <textarea placeholder="Add notes about this task..." rows="2"></textarea>
        <button onclick="saveTaskNotes(2)">Save Notes</button>
      </div>
    </div>
  </div>
  
  <!-- Task 3 -->
  <div class="task-card">
    <div class="task-title">
      <span>Attend Briefing</span>
      <button class="task-toggle" onclick="toggleTaskDetails(3)">
        <i class="fas fa-chevron-down" id="toggle-icon-3"></i>
      </button>
    </div>
    <div class="task-description">Weekly briefing with station chief</div>
    <div class="task-status">
      <span class="status-badge status-pending">Pending</span>
      <span><i class="far fa-clock me-1"></i>Today</span>
    </div>
    
    <div class="task-details" id="task-details-3">
      <div class="task-priority priority-low"><i class="fas fa-exclamation-circle me-1"></i>Low Priority</div>
      <div class="task-deadline"><i class="far fa-calendar-alt me-1"></i>Due: Today, 4:00 PM</div>
      <div class="task-buttons">
        <button class="task-btn task-btn-done" onclick="updateTaskStatus(3, 'done')">Mark Done</button>
        <button class="task-btn task-btn-progress" onclick="updateTaskStatus(3, 'progress')">In Progress</button>
        <button class="task-btn task-btn-forward" onclick="showForwardModal(3)">Forward</button>
      </div>
      <div class="task-notes">
        <textarea placeholder="Add notes about this task..." rows="2"></textarea>
        <button onclick="saveTaskNotes(3)">Save Notes</button>
      </div>
    </div>
  </div>
</div>

<!-- Forward Task Modal -->
<div class="modal fade" id="forwardTaskModal" tabindex="-1" aria-labelledby="forwardTaskModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="forwardTaskModalLabel">Forward Task</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>Forward this task to a higher committee or another officer:</p>
        
        <div class="mb-3">
          <label for="forwardReason" class="form-label">Reason for forwarding:</label>
          <textarea class="form-control" id="forwardReason" rows="3" placeholder="Explain why you're forwarding this task..."></textarea>
        </div>
        
        <div class="mb-3 forward-options">
          <label class="form-label">Forward to:</label>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="forwardTo" id="forwardToSupervisor" value="supervisor" checked>
            <label class="form-check-label" for="forwardToSupervisor">
              Supervisor (Inspector Sharma)
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="forwardTo" id="forwardToCommittee" value="committee">
            <label class="form-check-label" for="forwardToCommittee">
              Investigation Committee
            </label>
          </div>
          <div class="form-check">
            <input class="form-check-input" type="radio" name="forwardTo" id="forwardToSpecialist" value="specialist">
            <label class="form-check-label" for="forwardToSpecialist">
              Specialist Unit
            </label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" onclick="forwardTask()">Forward Task</button>
      </div>
    </div>
  </div>
</div>

<!-- Status Update Modal -->
<div class="modal fade" id="statusUpdateModal" tabindex="-1" aria-labelledby="statusUpdateModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="statusUpdateModalLabel">Status Updated</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div class="alert alert-success">
          <i class="fas fa-check-circle me-2"></i>
          <span id="statusUpdateMessage">Task status has been updated successfully!</span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" data-bs-dismiss="modal">OK</button>
      </div>
    </div>
  </div>
</div>

<!-- Main Content -->
<div class="container main-content">
  <h2 class="mb-4">Reports Submitted by Citizens</h2>

  <div class="report-card">
    <p><strong>Submitted by:</strong> John Doe</p>
    <p><strong>Type:</strong> Theft</p>
    <p><strong>Description:</strong> A wallet was stolen near the mall.</p>
    <p><strong>Location:</strong> <span class="location-link" onclick="openMap('12.9716,77.5946')">MG Road, Bangalore</span></p>

    <label><strong>Change Status:</strong></label>
    <select class="form-select status-select">
      <option>Pending</option>
      <option>In Progress</option>
      <option>Resolved</option>
    </select>

    <label class="mt-3"><strong>Case Update:</strong></label>
    <textarea class="form-control update-textarea" rows="3" placeholder="Enter update..."></textarea>
    <button class="btn btn-success update-button">Push Update</button>
  </div>

  <div class="report-card">
    <p><strong>Submitted by:</strong> Anonymous</p>
    <p><strong>Type:</strong> Harassment</p>
    <p><strong>Description:</strong> Harassment complaint at the office area.</p>
    <p><strong>Location:</strong> <span class="location-link" onclick="openMap('13.0827,80.2707')">Chennai Central</span></p>

    <label><strong>Change Status:</strong></label>
    <select class="form-select status-select">
      <option>Pending</option>
      <option>In Progress</option>
      <option>Resolved</option>
    </select>

    <label class="mt-3"><strong>Case Update:</strong></label>
    <textarea class="form-control update-textarea" rows="3" placeholder="Enter update..."></textarea>
    <button class="btn btn-success update-button">Push Update</button>
  </div>
</div>

<!-- Footer -->
<footer class="text-white bg-dark pt-4 pb-2">
  <div class="container">
    <div class="row text-start">
      <div class="col-md-3 mb-3 d-flex align-items-center">
        <img src="main-logo.png" alt="Logo" width="40" height="40" class="me-2">
        <h5 class="mt-2 mb-0">Swayam Suraksha</h5>
      </div>
      <div class="col-md-3 mb-3">
        <h6>Stay Updated</h6>
        <form class="d-flex flex-column">
          <input type="email" class="form-control mb-2" placeholder="Your email">
          <button class="btn btn-success btn-sm w-50">Subscribe</button>
        </form>
        <h6 class="mt-3">Quick Links</h6>
        <ul class="list-unstyled">
          <li><a href="#" class="text-success">Report a Crime</a></li>
          <li><a href="#" class="text-success">About Us</a></li>
          <li><a href="#" class="text-success">Crime Map</a></li>
        </ul>
      </div>
      <div class="col-md-3 mb-3">
        <h6>Contact Us</h6>
        <p>Email: support@swayamsuraksha.com</p>
        <p>Phone: 100</p>
      </div>
      <div class="col-md-3 mb-3">
        <h6>Visit Us</h6>
        <p>Police HQ, Sector 9, Bangalore</p>
        <p>Mon–Fri: 9am – 6pm</p>
      </div>
    </div>
    <hr class="border-secondary mt-2">
    <div class="text-center text pb-2">
      © Swayam Suraksha all rights reserved 2025
    </div>
  </div>
</footer>

<script>
  // Global variables
  let currentTaskId = null;
  const statusBadgeClasses = {
    'done': 'status-done',
    'progress': 'status-progress',
    'pending': 'status-pending',
    'forwarded': 'status-forwarded'
  };
  
  const statusLabels = {
    'done': 'Completed',
    'progress': 'In Progress',
    'pending': 'Pending',
    'forwarded': 'Forwarded'
  };
  
  // Toggle sidebar
  function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('active');
  }
  
  // Toggle task details
  function toggleTaskDetails(taskId) {
    const detailsElement = document.getElementById(`task-details-${taskId}`);
    const iconElement = document.getElementById(`toggle-icon-${taskId}`);
    
    if (detailsElement.style.display === 'block') {
      detailsElement.style.display = 'none';
      iconElement.classList.remove('fa-chevron-up');
      iconElement.classList.add('fa-chevron-down');
    } else {
      detailsElement.style.display = 'block';
      iconElement.classList.remove('fa-chevron-down');
      iconElement.classList.add('fa-chevron-up');
    }
  }
  
  // Update task status
  function updateTaskStatus(taskId, status) {
    const taskCard = document.getElementById(`task-details-${taskId}`).closest('.task-card');
    const statusBadge = taskCard.querySelector('.status-badge');
    
    // Remove all status classes
    statusBadge.classList.remove('status-pending', 'status-progress', 'status-done', 'status-forwarded');
    
    // Add the new status class
    statusBadge.classList.add(statusBadgeClasses[status]);
    
    // Update the text
    statusBadge.textContent = statusLabels[status];
    
    // Show status update modal
    const statusModal = new bootstrap.Modal(document.getElementById('statusUpdateModal'));
    document.getElementById('statusUpdateMessage').textContent = `Task has been marked as "${statusLabels[status]}"!`;
    statusModal.show();
  }
  
  // Show forward modal
  function showForwardModal(taskId) {
    currentTaskId = taskId;
    const forwardModal = new bootstrap.Modal(document.getElementById('forwardTaskModal'));
    forwardModal.show();
  }
  
  // Forward task
  function forwardTask() {
    if (currentTaskId) {
      // Get selected option
      const forwardTo = document.querySelector('input[name="forwardTo"]:checked').value;
      const reason = document.getElementById('forwardReason').value;
      
      // Update task status to forwarded
      const taskCard = document.getElementById(`task-details-${currentTaskId}`).closest('.task-card');
      const statusBadge = taskCard.querySelector('.status-badge');
      
      // Remove all status classes
      statusBadge.classList.remove('status-pending', 'status-progress', 'status-done', 'status-forwarded');
      
      // Add the forwarded status class
      statusBadge.classList.add('status-forwarded');
      
      // Update the text
      statusBadge.textContent = 'Forwarded';
      
      // Close the modal
      const forwardModal = bootstrap.Modal.getInstance(document.getElementById('forwardTaskModal'));
      forwardModal.hide();
      
      // Show status update modal
      const statusModal = new bootstrap.Modal(document.getElementById('statusUpdateModal'));
      
      let recipient = '';
      switch(forwardTo) {
        case 'supervisor':
          recipient = 'Inspector Sharma';
          break;
        case 'committee':
          recipient = 'the Investigation Committee';
          break;
        case 'specialist':
          recipient = 'the Specialist Unit';
          break;
      }
      
      document.getElementById('statusUpdateMessage').textContent = `Task has been forwarded to ${recipient}!`;
      statusModal.show();
      
      // Reset form
      document.getElementById('forwardReason').value = '';
      document.getElementById('forwardToSupervisor').checked = true;
    }
  }
  
  // Save task notes
  function saveTaskNotes(taskId) {
    const taskCard = document.getElementById(`task-details-${taskId}`);
    const notesTextarea = taskCard.querySelector('textarea');
    const notes = notesTextarea.value.trim();
    
    if (notes) {
      // In a real app, you would save this to a database
      alert(`Notes saved for Task #${taskId}: ${notes}`);
    } else {
      alert('Please enter some notes before saving.');
    }
  }
  
  // Open map
  function openMap(coords) {
    const url = `https://www.google.com/maps/search/?api=1&query=${coords}`;
    window.open(url, '_blank');
  }
  
  // Initialize tooltips
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize any Bootstrap tooltips
    const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
    tooltipTriggerList.map(function(tooltipTriggerEl) {
      return new bootstrap.Tooltip(tooltipTriggerEl);
    });
    
    // Add event listeners to report update buttons
    const updateButtons = document.querySelectorAll('.update-button');
    updateButtons.forEach(button => {
      button.addEventListener('click', function() {
        const card = this.closest('.report-card');
        const status = card.querySelector('.status-select').value;
        const update = card.querySelector('.update-textarea').value;
        
        if (update.trim() === '') {
          alert('Please enter an update before submitting.');
          return;
        }
        
        alert(`Report status updated to: ${status}\nUpdate: ${update}`);
        card.querySelector('.update-textarea').value = '';
      });
    });
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>